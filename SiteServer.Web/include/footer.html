<div class="footer">
  <div class="container">
    <div class="footer_top">
      <div class="footernav">
        <div class="menu-%e5%ba%95%e9%83%a8%e8%8f%9c%e5%8d%95-container">
          <ul id="menu-%e5%ba%95%e9%83%a8%e8%8f%9c%e5%8d%95" class="footnav">
          <stl:channels topLevel="0" groupChannel="底部导航" totalNum="2">
            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children"><stl:a>{Channel.Title}</stl:a>
              <ul  class="sub-menu">
              <stl:channels groupChannel="底部导航">
                <li class="menu-item menu-item-type-custom menu-item-object-custom"><stl:a>{Channel.Title}</stl:a></li>
              </stl:channels>
              </ul>
            </li>
          </stl:channels>
          </ul>
        </div>
      </div>
      
      <div class="footer_other">
        <div class="footer_other_title">资源下载</div>
        <div class="footer_other_con">
          <stl:contents channelIndex="资源下载">
          <stl:if type="linkUrl" op="NotEmpty">
            <stl:yes>
              <stl:a href="{Content.linkUrl}" target="_blank">{Content.title}</stl:a><br/>
            </stl:yes>
            <stl:no>
              <stl:a href="{Content.fileUrl}">{Content.title}</stl:a><br/>
            </stl:no>
          </stl:if>
        </stl:contents>
        </div>
      </div>  
      <div class="footer_other">
        <div class="footer_other_title">系统管理</div>
        <div class="footer_other_con"> 
          <a target="_blank" href="https://www.baidu.com">登录管理后台</a>
        </div>
      </div>
      <div class="footer_other">
        <div class="footer_other_title">站点访问统计</div>
        <div class="footer_other_con" id="vm_siteVisitData" v-cloak>
            <span>总访问量：{{siteVisitData.totalPV}}次</span><br />
            <span>今日访问量：{{siteVisitData.todayPV}}次</span><br />
            <span>日均访问量：{{siteVisitData.avgPV}}次</span>
        </div>
      </div>
      <div class="footer_other wide">
        <div class="footer_other_title">联系方式</div>
        <div class="footer_other_con">
          <span>公司地址：{stl:value type="address"}</span><br/>
          <span>联系电话：{stl:value type="phoneNumber"}</span><br/>
          <span>电子邮箱：{stl:value type="email"}</span></div>
      </div>
      <div class="clearfix"></div>
    </div>
    <div class="footer-bottom" style="text-align:center;">
      <div class="copyright">{stl:value type="copyright"}</div>
    </div>
  </div>
</div>

<script>
    $(function () {
        //Footer - 站点访问量数据收集、获取
        vm = new Vue({
            el: "#vm_siteVisitData",
            data: {
                siteVisitData: {    //站点访问量数据
                    todayPV: null,  //站点日访问量
                    avgPV: null,    //站点平均访问量
                    totalPV: null   //站点总访问量
                },
                site: 'major'       //站点访问量统计的站点标识
            },
            methods: {
                //获取站点日访问量数据
                getTodayPV: function () {
                    var self = this;
                    $.ajax({
                        url: '/api/aibol/GetPV?site=' + self.site,
                        type: 'get',
                        success: function (response) {
                            if (response.code == 200 && response.data) {
                                self.siteVisitData.todayPV = response.data;
                            }
                        }
                    })
                },

                //获取站点平均访问量数据
                getAvgPV: function () {
                    var self = this;
                    $.ajax({
                        url: '/api/aibol/GetAvgPV?site=' + self.site,
                        type: 'get',
                        success: function (response) {
                            if (response.code == 200 && response.data) {
                                self.siteVisitData.avgPV = response.data;
                            }
                        }
                    });
                },

                //获取站点总访问量数据
                getTotalPV: function () {
                    var self = this;
                    $.ajax({
                        url: '/api/aibol/GetTotalPV?site=' + self.site,
                        type: 'get',
                        success: function (response) {
                            if (response.code == 200 && response.data) {
                                self.siteVisitData.totalPV = response.data;
                            }
                        }
                    });
                },

                //添加站点访问量数据
                setPV: function () {
                    var self = this;
                    $.ajax({
                        url: '/api/aibol/addpv?site=' + self.site,
                        type: 'get',
                        success: function (response) {
                            if (response.code == 200) {
                                self.getTodayPV();
                                self.getAvgPV();
                                self.getTotalPV();
                            }
                        }
                    });
                }
            },
            created: function () {
                var self = this;

                //站点访问量数据设置
                this.setPV();
            }
        })
    });
</script>