<div class="themenav">
    <!--logo+搜索+工作区登录信息-->
    <div class="container">
        <div class="logo"> <a href="{Stl.SiteUrl}/index.html"> {stl:value type=Logo} </a> </div>
        <div class="search">
            <div id="sb-search" class="sb-search sb-search sb-search-open">
                <form id="searchform" method="get" action="/newsSite/utils/search.html">
                    <input class="sb-search-input" placeholder="输入关键词查找..." type="text" name="word">
                    <input id="searchsubmit" class="sb-search-submit" type="submit">
                    <span class="glyphicon glyphicon-search"></span>
                </form>
            </div>
            <script type="text/javascript" src="{Stl.SiteUrl}/js/classie.js"></script>
            <script type="text/javascript" src="{Stl.SiteUrl}/js/uisearch.js"></script>
            <script>
                new UISearch(document.getElementById('sb-search'));
            </script>
        </div>
        <div class="loginInfo" v-cloak id="loginInfoVM">
            <a v-if="!isLogin" v-bind:href="login">登录</a>
            <a v-if="isLogin" v-bind:href="logout">退出</a>
            <a v-if="isLogin" target="_blank" v-bind:href="backstage">进入工作区</a>
        </div>
        <div class="clearfix"></div>
    </div>

    <!--站点导航-->
    <div class="container">
        <div class="headerNav" id="headerNav">
            <ul class="navItem" id="headerNavItem">
                <li><a href='{Stl.SiteUrl}/index.html'>首页</a></li>
                <stl:channels topLevel="0" groupChannel="头部导航">
                    <li>
                        <stl:if type="linkUrl" op="Empty">
                            <stl:yes>
                                <stl:a>{Channel.Title}</stl:a>
                            </stl:yes>
                            <stl:no>
                                <stl:a target="_blank">{Channel.Title}</stl:a>
                            </stl:no>
                        </stl:if>
                        <ul class="second-nav">
                            <stl:channels>
                                <li>
                                    <stl:if type="linkUrl" op="Empty">
                                        <stl:yes>
                                            <stl:a>{Channel.Title}</stl:a>
                                        </stl:yes>
                                        <stl:no>
                                            <stl:a target="_blank">{Channel.Title}</stl:a>
                                        </stl:no>
                                    </stl:if>
                                    <ul class="third-nav">
                                        <stl:channels>
                                            <li>
                                                <stl:if type="linkUrl" op="Empty">
                                                    <stl:yes>
                                                        <stl:a>{Channel.Title}</stl:a>
                                                    </stl:yes>
                                                    <stl:no>
                                                        <stl:a target="_blank">{Channel.Title}</stl:a>
                                                    </stl:no>
                                                </stl:if>
                                            </li>
                                        </stl:channels>
                                    </ul>
                                </li>
                            </stl:channels>
                        </ul>
                    </li>
                </stl:channels>
            </ul>
            <a href="javascript:;" class="handleMore" id="navHandleMore"><span>更多</span><i class="fa fa-angle-double-right"></i></a>
        </div>
    </div>
    <script>
        $(function () {
            var loginInfoVM = new Vue({
                el: "#loginInfoVM",
                data: {
                    isLogin: false,
                    login: null
                },
                created: function () {
                    this.login = global.clients.getLoginUrl('portal');
                    this.logout = global.clients.getLogoutUrl('portal');
                    this.backstage = global.urls.backstage;
                    setInterval(function () {
                        if (global.loginInfo) {
                            loginInfoVM.isLogin = true;
                        }
                    }, 1000);
                }
            })

            //三级导航交互
            var _this1 = null;
            $('.headerNav .navItem>li').hover(function () {
                _this1 = $(this);
                _this1.find('.second-nav').show();
                var _this2 = null;
                _this1.find('.second-nav').find('li').hover(function () {
                    _this2 = $(this);
                    _this2.find('.third-nav').show();
                    _this2.find('.third-nav').hover(function () {
                        $(this).show();
                    }, function () {
                        $(this).hide();
                    });
                }, function () {
                    _this2.find('.third-nav').hide();
                });
            }, function () {
                if (_this1) {
                    _this1.find('.second-nav').hide();
                }
            });

            //导航上的"更多"
            if ($("#headerNav")[0].scrollHeight > 40) {
               $("#navHandleMore").css("display", "block");
            }
            $("#navHandleMore").on('click', function () {
                if ($("#headerNav").css("overflow-y") == 'hidden') {
                    $("#headerNav").css("overflow-y", "visible");
                    $("#navHandleMore i").removeClass("fa-angle-double-right").addClass("fa-angle-double-up")
                    $("#navHandleMore span").text("收起");
                }
                else {
                    $("#headerNav").css("overflow-y", "hidden");
                    $("#navHandleMore i").removeClass("fa-angle-double-up").addClass("fa-angle-double-right")
                    $("#navHandleMore span").text("更多");
                }
            })

            //IE9 placeholder支持
            //$('input, textarea').placeholder();
        });
    </script>
</div>