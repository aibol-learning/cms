<div class="themenav">
    <!--logo+搜索+工作区登录信息-->
    <div class="container" style="position:relative">
        <div class="logo">
            <stl:if type="TemplateType" op="Equals" value="IndexPageTemplate">
                <a href="/index.html"> {stl:value type=Logo} </a>
            </stl:if>
            <stl:if type="TemplateType" op="NotEquals" value="IndexPageTemplate">
                <a href="{Stl.SiteUrl}/index.html"> {stl:value type=Logo} </a>
            </stl:if>
        </div>
        <div class="search">
            <span style="font-size:16px; color:#666; line-height:40px; margin-top:10px; display:inline-block; ">站内搜索&emsp;</span>
            <div id="sb-search" class="sb-search sb-search-open">
                <form id="searchform" method="get" action="{Stl.SiteUrl}/utils/search.html">
                    <input class="sb-search-input" placeholder="站内关键字搜索…" type="text" name="word">
                    <input id="searchsubmit" class="sb-search-submit" type="submit">
                    <span class="glyphicon glyphicon-search"></span>
                </form>
            </div>
            <script src="/js/classie.js"></script>
            <script src="/js/uisearch.js"></script>
            <script>
                new UISearch(document.getElementById('sb-search'));
            </script>
        </div>
        <div class="loginInfo" v-cloak id="loginInfoVM">
            <a v-if="!isLogin" v-bind:href="login">登录我的工作区</a>
            <a v-if="isLogin" v-bind:href="logout">退出</a>
            <a v-if="isLogin" target="_blank" v-bind:href="backstage" style="margin-left:10px">进入工作区</a>
        </div>
        <div class="clearfix"></div>
    </div>
</div>
<script>
    $(function () {
        var loginInfoVM = new Vue({
            el: "#loginInfoVM",
            data: {
                isLogin: false,
                login: null
            },
            created: function () {
                this.login = '/api/aibol/login?returnurl=' + escape(window.location);
                this.logout = '/api/aibol/logout';
                this.backstage = global.urls.backstage;
                setInterval(function () {
                    if (global.loginInfo) {
                        loginInfoVM.isLogin = true;
                    }
                }, 1000);
            }
        })    
    });
</script>